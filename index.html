<html><head><base href="https://tv-box-premium-iptv.com/"><title>TV Box Premium IPTV</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Brush+Script+MT&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background-color: #1e1e1e;
    color: #fff;
    margin: 0;
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: #00a0e9;
    font-size: 2.5em;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    font-weight: 300;
    letter-spacing: 2px;
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 0.5s, transform 0.5s;
  }
  #whatsappContact {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s, transform 0.5s;
  }
  #whatsappContact img {
    width: 30px;
    height: 30px;
    margin-right: 10px;
  }
  #whatsappContact a {
    color: #25D366;
    text-decoration: none;
    font-weight: bold;
    display: flex;
    align-items: center;
    margin-bottom: 5px;
  }
  #whatsappContact .phone-number {
    color: #fff;
    font-size: 1.5em;
    font-family: 'Brush Script MT', cursive;
  }
  #videoPlayer {
    width: 100%;
    max-width: 480px; /* Adjusted for Android TV */
    height: 270px; /* 16:9 aspect ratio for 480px width */
    margin: 20px auto;
    display: block;
    box-shadow: 0 0 20px rgba(0, 160, 233, 0.3);
    border-radius: 10px;
  }
  #channelList {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    margin-top: 30px;
  }
  .channel-button {
    background-color: #2a2a2a;
    color: #fff;
    border: none;
    padding: 12px 20px;
    cursor: pointer;
    border-radius: 8px;
    display: flex;
    align-items: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  .channel-button:hover, .channel-button:focus {
    background-color: #3a3a3a;
    outline: 2px solid #00a0e9;
    transform: translateY(-2px);
  }
  .channel-button.active {
    background-color: #00a0e9;
    box-shadow: 0 6px 10px rgba(0,160,233,0.3);
  }
  .channel-logo {
    width: 35px;
    height: 35px;
    margin-right: 12px;
    object-fit: cover;
    border-radius: 50%;
  }
  #errorMessage {
    color: #ff6b6b;
    text-align: center;
    margin-top: 15px;
    font-weight: bold;
  }
</style>
</head>
<body>
  <h1 id="mainTitle">TV Box Premium IPTV</h1>
  <div id="whatsappContact">
    <a href="https://wa.me/1125875444" target="_blank">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/767px-WhatsApp.svg.png" alt="WhatsApp logo">
      VENTAS Y ATENCIÃ“N AL CLIENTE
    </a>
    <span class="phone-number" id="phoneNumber">1125875444</span>
  </div>
  <video id="videoPlayer" controls></video>
  <div id="channelList"></div>
  <div id="errorMessage"></div>

  <script src="https://cdn.jsdelivr.net/npm/shaka-player@4.3.0/dist/shaka-player.compiled.min.js"></script>
  <script>
    const videoPlayer = document.getElementById('videoPlayer');
    const channelList = document.getElementById('channelList');
    const errorMessageDiv = document.getElementById('errorMessage');
    const mainTitle = document.getElementById('mainTitle');
    const whatsappContact = document.getElementById('whatsappContact');
    const phoneNumber = document.getElementById('phoneNumber');
    let player;
    let currentChannelIndex = 0;

    const channels = [
      {
        name: "TYC SPORTS",
        logo: "https://i.ibb.co/MN7HcLq/tycsports.png",
        licenseKey: "2b21c8fa9a329cce311a4c4a4aa996a1:cc23ea1fb32629f9e1f48c8deeae3e5b",
        url: "https://edge-mix02-mun.cvattv.com.ar/live/c7eds/TyCSport/SA_Live_dash_enc/TyCSport.mpd"
      },
      {
        name: "ESPN PREMIUM",
        logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/ESPN_Premium_logo.svg/1200px-ESPN_Premium_logo.svg.png",
        licenseKey: "4c230dbc7f6a4bfa6ad0aa73ff792374:4186a7c2a15f590a9399886feaec4257",
        url: "http://cdn.cvattv.com.ar/live/c7eds/Fox_Sports_Premiun_HD/SA_Live_dash_enc/Fox_Sports_Premiun_HD.mpd"
      },
      {
        name: "TNT SPORTS",
        logo: "https://i.postimg.cc/kMkS5BVf/TNT-SPORTS-ARGENTINA.png",
        licenseKey: "bc80fa3da696e503f940fde5f681a1c5:ea46e4e9f1132e8dd71fb77f7d55058a",
        url: "http://cdn.cvattv.com.ar/live/c6eds/TNT_Sports_HD/SA_Live_dash_enc_2A/TNT_Sports_HD.mpd"
      },
      {
        name: "Eventos 1 HD",
        logo: "https://i.ibb.co/TH2dGD9/eventos1hd.png",
        licenseKey: "5c86e237317c2231ac1bc130e995fad6:dcacf7b239ee03df3c69ca11dbcde4eb",
        url: "https://edge-mix02-mun.cvattv.com.ar/live/c3eds/Eventos1HD/SA_Live_dash_enc/Eventos1HD.mpd"
      }
    ];

    function animateElements() {
      setTimeout(() => {
        mainTitle.style.opacity = '1';
        mainTitle.style.transform = 'translateY(0)';
        whatsappContact.style.opacity = '1';
        whatsappContact.style.transform = 'translateY(0)';
      }, 100);

      // Animate phone number
      let opacity = 0;
      let fontSize = 1.5;
      const animatePhoneNumber = () => {
        opacity += 0.05;
        fontSize += 0.01;
        phoneNumber.style.opacity = opacity;
        phoneNumber.style.fontSize = `${fontSize}em`;
        
        if (opacity < 1) {
          requestAnimationFrame(animatePhoneNumber);
        } else {
          // Start pulsing animation
          let scale = 1;
          let growing = true;
          const pulsePhoneNumber = () => {
            if (growing) {
              scale += 0.001;
              if (scale >= 1.05) growing = false;
            } else {
              scale -= 0.001;
              if (scale <= 1) growing = true;
            }
            phoneNumber.style.transform = `scale(${scale})`;
            requestAnimationFrame(pulsePhoneNumber);
          };
          pulsePhoneNumber();
        }
      };
      animatePhoneNumber();
    }

    function createChannelButtons() {
      channels.forEach((channel, index) => {
        const button = document.createElement('button');
        button.className = 'channel-button';
        button.innerHTML = `
          <img class="channel-logo" src="${channel.logo}" alt="${channel.name} logo">
          <span>${channel.name}</span>
        `;
        button.onclick = () => loadChannel(index);
        button.ondblclick = () => toggleFullscreen();
        channelList.appendChild(button);
      });
    }

    async function loadChannel(index) {
      errorMessageDiv.textContent = '';
      const channel = channels[index];
      
      if (player) {
        await player.unload();
        player = null;
      }

      player = new shaka.Player(videoPlayer);

      try {
        const [keyId, key] = channel.licenseKey.split(':');
        player.configure({
          drm: {
            clearKeys: {
              [keyId]: key
            }
          },
          abr: {
            defaultBandwidthEstimate: 500000, // 500 kbps
            restrictions: {
              minHeight: 240,
              maxHeight: 480
            }
          }
        });

        await player.load(channel.url);
        videoPlayer.play();

        // Update active button and current channel index
        document.querySelectorAll('.channel-button').forEach((btn, i) => {
          btn.classList.toggle('active', i === index);
        });
        currentChannelIndex = index;
      } catch (error) {
        console.error('Error loading video:', error);
        errorMessageDiv.textContent = `Error: ${error.message || 'Unable to load video'}`;
      }
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        if (videoPlayer.requestFullscreen) {
          videoPlayer.requestFullscreen();
        } else if (videoPlayer.mozRequestFullScreen) { // Firefox
          videoPlayer.mozRequestFullScreen();
        } else if (videoPlayer.webkitRequestFullscreen) { // Chrome, Safari and Opera
          videoPlayer.webkitRequestFullscreen();
        } else if (videoPlayer.msRequestFullscreen) { // IE/Edge
          videoPlayer.msRequestFullscreen();
        }
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.mozCancelFullScreen) { // Firefox
          document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) { // Chrome, Safari and Opera
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) { // IE/Edge
          document.msExitFullscreen();
        }
      }
    }

    function changeChannel(direction) {
      let newIndex = currentChannelIndex + direction;
      if (newIndex < 0) {
        newIndex = channels.length - 1;
      } else if (newIndex >= channels.length) {
        newIndex = 0;
      }
      loadChannel(newIndex);
    }

    function initApp() {
      shaka.polyfill.installAll();
      if (shaka.Player.isBrowserSupported()) {
        createChannelButtons();
        // Load the first channel by default
        loadChannel(0);
        animateElements();
      } else {
        errorMessageDiv.textContent = 'Browser not supported for video playback';
      }
    }

    // Handle keyboard navigation
    function handleKeyNavigation(event) {
      const buttons = Array.from(channelList.getElementsByClassName('channel-button'));
      const currentIndex = buttons.findIndex(btn => btn === document.activeElement);

      switch(event.key) {
        case 'ArrowRight':
        case 'ArrowDown':
          event.preventDefault();
          if (document.fullscreenElement) {
            changeChannel(1);
          } else if (currentIndex < buttons.length - 1) {
            buttons[currentIndex + 1].focus();
          }
          break;
        case 'ArrowLeft':
        case 'ArrowUp':
          event.preventDefault();
          if (document.fullscreenElement) {
            changeChannel(-1);
          } else if (currentIndex > 0) {
            buttons[currentIndex - 1].focus();
          }
          break;
        case 'Enter':
          event.preventDefault();
          if (currentIndex !== -1) {
            loadChannel(currentIndex);
          }
          break;
        case 'f':
          event.preventDefault();
          toggleFullscreen();
          break;
      }
    }

    document.addEventListener('DOMContentLoaded', initApp);
    document.addEventListener('keydown', handleKeyNavigation);

    // Double click on video to toggle fullscreen
    videoPlayer.addEventListener('dblclick', toggleFullscreen);
  </script>
</body></html>
